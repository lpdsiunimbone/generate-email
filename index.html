<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Permintaan Email Institusi</title>
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
</head>
<body class="bg-gray-100">

  <!-- Navigation (opsional jika diperlukan toggle menu) -->
  <nav class="bg-blue-600 text-white py-4 shadow-md">
    <div class="container mx-auto flex justify-between px-4">
      <h1 class="text-xl font-semibold">Email Generator Application</h1>
      <div class="space-x-4">
        <a href="#" id="form-nav" class="hover:underline">Formulir</a>
        <a href="#" id="status-nav" class="hover:underline">Cek Status</a>
        <a href="#" id="info-nav" class="hover:underline">Info</a>
      </div>
    </div>
  </nav>

  <!-- Main Content -->
  <main class="container mx-auto px-4 py-8">

    <!-- Formulir Permintaan -->
    <div id="form-section" class="bg-white p-6 rounded-lg shadow-lg mb-10">
      <h2 class="text-2xl font-semibold mb-4">Formulir Permintaan Email Institusi</h2>
      <form id="email-request-form" class="space-y-4">
        <div class="grid md:grid-cols-2 gap-4">
          <input id="nama" name="nama" required placeholder="Nama Lengkap" class="form-input w-full p-2 border border-gray-300 rounded-md" />
          <input id="nidn" name="nidn" required placeholder="NIDN" class="form-input w-full p-2 border border-gray-300 rounded-md" />
        </div>
        <select id="prodi" name="prodi" required class="form-select w-full p-2 border border-gray-300 rounded-md">
          <option value="">Pilih Program Studi</option>
          <option value="Pendidikan Matematika">Pendidikan Matematika</option>
          <option value="Pendidikan Biologi">Pendidikan Biologi</option>
          <option value="Pendidikan Bahasa Inggris">Pendidikan Bahasa Inggris</option>
          <option value="Pendidikan Bahasa Indonesia">Pendidikan Bahasa Indonesia</option>
          <option value="Pendidikan Ekonomi">Pendidikan Ekonomi</option>
          <option value="Pendidikan Pancasila dan Kewarganegaraan">Pendidikan Pancasila dan Kewarganegaraan</option>
          <option value="Pendidikan Kepelatihan Olahraga">Pendidikan Kepelatihan Olahraga</option>
          <option value="Teknologi Pendidikan"> Teknologi Pendidikan</option>
          <option value="Agribisnis">Agribisnis</option>
          <option value="Agroteknologi">Agroteknologi</option>
          <option value="Teknologi Hasil Pertanian">Teknologi Hasil Pertanian</option>
          <option value="Peternakan">Peternakan</option>
          <option value="Pascasarjana PBI">Pascasarjana PBI</option>
          <option value=""></option>
        </select>
        <div class="flex">
          <input id="email" name="email" required placeholder="namadosen" class="form-input w-full p-2 border border-gray-300 rounded-l-md" />
          <span class="inline-flex items-center px-4 bg-gray-100 border border-l-0 border-gray-300 rounded-r-md">@unimbone.ac.id</span>
        </div>
        <input type="email" id="email-sekunder" name="email-sekunder" required placeholder="Email Sekunder (untuk recovery)" class="form-input w-full p-2 border border-gray-300 rounded-md" />
        <input type="tel" id="whatsapp" name="whatsapp" required placeholder="Nomor WhatsApp (+62 atau 08)" class="form-input w-full p-2 border border-gray-300 rounded-md" />
        <button type="submit" class="w-full bg-blue-600 text-white py-2 rounded-md hover:bg-blue-700">Ajukan Permintaan</button>
      </form>
    </div>

    <!-- Cek Status -->
    <div id="status-section" class="bg-white p-6 rounded-lg shadow-lg mb-10 hidden">
      <h2 class="text-2xl font-semibold mb-4">Cek Status Permintaan</h2>
      <form id="status-check-form" class="space-y-4">
        <div class="grid md:grid-cols-2 gap-4">
          <input id="check-nidn" required placeholder="NIDN" class="form-input w-full p-2 border border-gray-300 rounded-md" />
          <div class="flex">
            <input id="check-email" required placeholder="namadosen" class="form-input w-full p-2 border border-gray-300 rounded-l-md" />
            <span class="inline-flex items-center px-4 bg-gray-100 border border-l-0 border-gray-300 rounded-r-md">@unimbone.ac.id</span>
          </div>
        </div>
        <button type="submit" class="bg-blue-600 text-white py-2 px-6 rounded-md hover:bg-blue-700">Cek Status</button>
      </form>

      <!-- Hasil Status -->
      <div id="status-result" class="mt-6 hidden bg-gray-100 p-4 rounded-lg">
        <p><strong>Status:</strong> <span id="status-badge" class="text-yellow-600 font-medium">Menunggu</span></p>
        <ul class="mt-2 space-y-1 text-sm text-gray-800">
          <li><strong>Nama:</strong> <span id="result-nama">-</span></li>
          <li><strong>NIDN:</strong> <span id="result-nidn">-</span></li>
          <li><strong>Prodi:</strong> <span id="result-prodi">-</span></li>
          <li><strong>Email:</strong> <span id="result-email">-</span></li>
          <li><strong>Tanggal:</strong> <span id="result-tanggal">-</span></li>
          <li><strong>Catatan Admin:</strong> <span id="result-catatan">-</span></li>
        </ul>
      </div>
    </div>

    <!-- Info -->
    <div id="info-section" class="bg-white p-6 rounded-lg shadow-lg hidden">
      <h2 class="text-2xl font-semibold mb-4">Informasi Sistem</h2>
      <p>Sistem ini menyimpan permintaan email ke Google Spreadsheet dan akan diproses oleh admin.</p>
    </div>

    <!-- Modal Sukses -->
    <div id="success-modal" class="fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50 hidden">
      <div class="bg-white p-6 rounded-lg max-w-sm w-full text-center">
        <h3 class="text-lg font-semibold text-green-600 mb-2">Permintaan Berhasil!</h3>
        <p class="text-gray-700">ID Permintaan: <span id="request-id"></span></p>
        <p class="text-gray-700 mb-4">Tanggal: <span id="request-date"></span></p>
        <button id="close-modal" class="mt-2 bg-blue-600 text-white py-2 px-4 rounded-md">Tutup</button>
      </div>
    </div>
  </main>

  <!-- Footer -->
  <footer class="bg-gray-800 text-white py-4 text-center text-sm">
    &copy; 2025 LPDSI - Universitas Muhammadiyah Bone
  </footer>

  <!-- Script -->
  <script>
    const spreadsheetData = []; // Simulasi

    document.getElementById('form-nav').onclick = () => {
      document.getElementById('form-section').classList.remove('hidden');
      document.getElementById('status-section').classList.add('hidden');
      document.getElementById('info-section').classList.add('hidden');
    };
    document.getElementById('status-nav').onclick = () => {
      document.getElementById('form-section').classList.add('hidden');
      document.getElementById('status-section').classList.remove('hidden');
      document.getElementById('info-section').classList.add('hidden');
    };
    document.getElementById('info-nav').onclick = () => {
      document.getElementById('form-section').classList.add('hidden');
      document.getElementById('status-section').classList.add('hidden');
      document.getElementById('info-section').classList.remove('hidden');
    };

    document.getElementById('email-request-form').addEventListener('submit', function(e) {
      e.preventDefault();

      const nama = document.getElementById('nama').value;
      const nidn = document.getElementById('nidn').value;
      const prodi = document.getElementById('prodi').value;
      const email = document.getElementById('email').value;
      const emailSekunder = document.getElementById('email-sekunder').value;
      const whatsapp = document.getElementById('whatsapp').value;

      const requestId = 'REQ-' + new Date().getTime().toString().slice(-8);
      const formattedDate = new Date().toLocaleDateString('id-ID', { year: 'numeric', month: 'long', day: 'numeric' });

      spreadsheetData.push({
        id: requestId,
        nama, nidn, prodi,
        email: email + '@unimbone.ac.id',
        emailSekunder, whatsapp,
        tanggal: formattedDate,
        status: 'menunggu', 'Sedang proses','ditolak', 'Selesai',
        catatan: 'Permintaan baru, menunggu verifikasi'
      });

      document.getElementById('request-id').textContent = requestId;
      document.getElementById('request-date').textContent = formattedDate;
      document.getElementById('success-modal').classList.remove('hidden');
      document.getElementById('email-request-form').reset();
    });

    document.getElementById('close-modal').onclick = () => {
      document.getElementById('success-modal').classList.add('hidden');
    };

    document.getElementById('status-check-form').addEventListener('submit', function(e) {
      e.preventDefault();
      const nidn = document.getElementById('check-nidn').value;
      const email = document.getElementById('check-email').value + '@unimbone.ac.id';

      const result = spreadsheetData.find(req => req.nidn === nidn && req.email === email);
      if (result) {
        document.getElementById('result-nama').textContent = result.nama;
        document.getElementById('result-nidn').textContent = result.nidn;
        document.getElementById('result-prodi').textContent = result.prodi;
        document.getElementById('result-email').textContent = result.email;
        document.getElementById('result-tanggal').textContent = result.tanggal;
        document.getElementById('result-catatan').textContent = result.catatan;
        document.getElementById('status-badge').textContent = result.status.charAt(0).toUpperCase() + result.status.slice(1);
        document.getElementById('status-result').classList.remove('hidden');
      } else {
        alert("Data tidak ditemukan.");
      }
    });
  </script>
</body>
</html>
